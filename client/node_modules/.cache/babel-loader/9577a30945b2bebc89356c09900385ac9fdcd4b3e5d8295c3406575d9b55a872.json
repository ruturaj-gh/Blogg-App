{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/HP/Documents/Project/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/HP/Documents/Project/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/HP/Documents/Project/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React from'react';import{useState}from'react';import{Navigate}from'react-router-dom';import{useContext}from'react';import{UserContext}from'../UserContext';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Loginpage(){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),redirect=_useState6[0],setRedirect=_useState6[1];var _useContext=useContext(UserContext),setUserInfo=_useContext.setUserInfo;function login(_x){return _login.apply(this,arguments);}function _login(){_login=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(ev){var response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:ev.preventDefault();_context.next=3;return fetch('http://localhost:4000/login',{method:'POST',body:JSON.stringify({username:username,password:password}),headers:{'Content-Type':'application/json'},credentials:'include'});case 3:response=_context.sent;if(response.ok){response.json().then(function(userInfo){setUserInfo(userInfo);setRedirect(true);});}else{alert('Wrong credentials');}case 5:case\"end\":return _context.stop();}},_callee);}));return _login.apply(this,arguments);}if(redirect){return/*#__PURE__*/_jsx(Navigate,{to:\"/\"});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"login\",onSubmit:login,children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Login\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"username\",value:username,onChange:function onChange(ev){return setUsername(ev.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",value:password,onChange:function onChange(ev){return setPassword(ev.target.value);}}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Login\"})]})});}","map":{"version":3,"names":["React","useState","Navigate","useContext","UserContext","jsx","_jsx","jsxs","_jsxs","Loginpage","_useState","_useState2","_slicedToArray","username","setUsername","_useState3","_useState4","password","setPassword","_useState5","_useState6","redirect","setRedirect","_useContext","setUserInfo","login","_x","_login","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","ev","response","wrap","_callee$","_context","prev","next","preventDefault","fetch","method","body","JSON","stringify","headers","credentials","sent","ok","json","then","userInfo","alert","stop","to","children","className","onSubmit","type","placeholder","value","onChange","target"],"sources":["C:/Users/HP/Documents/Project/client/src/pages/loginpage.js"],"sourcesContent":["\r\nimport React from 'react';\r\nimport  { useState } from 'react';\r\nimport { Navigate } from 'react-router-dom';\r\nimport { useContext } from 'react';\r\nimport { UserContext } from '../UserContext';\r\nexport default function Loginpage() {\r\n  const [username, setUsername] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [redirect, setRedirect] = useState(false);\r\n  const {setUserInfo} =useContext(UserContext)\r\n  async function login(ev) {\r\n    ev.preventDefault();\r\n    \r\n    const response = await fetch('http://localhost:4000/login', {\r\n      method: 'POST',\r\n      body: JSON.stringify({ username, password }),\r\n      headers: { 'Content-Type': 'application/json' },\r\n      credentials: 'include',\r\n    });\r\n\r\n    if (response.ok)\r\n    {\r\n      \r\n      response.json().then(userInfo => {\r\n        setUserInfo(userInfo);\r\n        setRedirect(true);\r\n        \r\n      });\r\n    } else {\r\n      alert('Wrong credentials')\r\n    }\r\n  }\r\n\r\n  if (redirect) {\r\n    return <Navigate to=\"/\" />;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <form className=\"login\" onSubmit={login}>\r\n        <h1>Login</h1>\r\n        <input type=\"text\" placeholder=\"username\" value={username} onChange={ev => setUsername(ev.target.value)} />\r\n        <input type=\"password\" placeholder=\"password\" value={password} onChange={ev => setPassword(ev.target.value)} />\r\n        <button type=\"submit\">Login</button>\r\n      </form>\r\n    </div>\r\n  );\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}